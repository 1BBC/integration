# ШЕСТОЕ ПОКОЛЕНИЕ ИНТЕГРАЦИИ!

### Начало интеграции

1. Загрузите файлы **api.php** и **api.js** в корневую директорию (туда где находится index.html).

1. Откройте _api.php_ и измените 4 значения: _offer_id_, _country_, _api_key_, _user_id_ (Вы можете найти в личном кабинете), при необходимости можно указать стрим - поле "_stream_id_".

3. В том же _index.html_, перед закрывающим тегом `</body>` добавь следующий скрипт:
 
 ```html
 <script src="api.js"></script>
 ```
> Этот скрипт задаст правильное значение атрибута action, сделает поля обязательными, установит нужный метод передачи формы и при наличии отправит в трекер utm метки и sub-параметры



4. На этом интеграцию завершено. Можно отправлять тестовую заявку.

Если все прошло хорошо - пользователя должно перенаправить на _success.html_, а в корневой директории будет создана папка _log_.
Новую заявку можно найти в ЛК Terraleads и в лог-файле на сервере. 

### Советы и примечания

- **Совет:**		    Если на странице две формы, обязательно проверяйте вторую форму!

- **Примечание:**	    Если вы уже интегрировались по предыдущих поколениях - ничего страшного, все будет работать, но в дальнейшем используй новое поколение.

- **Примечание:**	    Если у вас возникли вопросы или пожелания - имя мое Владимир, скайп - nagard11

----------

### Изменения в поколениях:
    - Первое поколениях     - Раньше интеграции использовали библиотеку jquery, не на всех страницах она подключена. Также она могла быть подключена в разных местах, что создавало значительный дискомфорт.

    - Второе поколение      - больше не использует jquery. Также было добавлено принудительное приосвоення значение для атрибута method (method = "post")

    - Третье поколение      - исправлена ​​ошибка, назначение форме не правильного кода.

    - Четвертое поколение   - Теперь в GET параметрах передаются: sub_id, sub_id_1, sub_id_2, sub_id_3, sub_id_4 (за эти параметры можешь передавать в Terraleads sub_id и другие вещи).

    - Пятое поколение       - Теперь нет неоходимости создавать папку log, это будет сделано автоматически.
                            - поля имя и телефон теперь обязательны, проверка их есть как на клиенстський стороне, так и на серверной.
                            - Js сценарий вынесен в отдельный файл.
                            - Теперь можно указать стрим
                            
    - Шестое поколение      - теперь не нужно присваивать никаких идентификаторов формам. Скрипт сам найдет все формы и сделает все, что нужно.


